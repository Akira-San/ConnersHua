<style>
    .layui-btn .layui-icon{
        margin-right: 0;
    }
    .layui-layer-page .layui-layer-content{
        overflow: initial;
    }
</style>
<form class="layui-form seller-form" action="">
	<div class="layui-form-item">
		<div class="layui-inline">
			<button class="layui-btn add-class layui-btn-sm"><i class="layui-icon">&#xe608;</i> 添加</button>
		</div>
	</div>
</form>
<div class="table-body">
	<table id="hbTable" lay-filter="test"></table>
</div>
<script>
    var table;
    layui.use(['form', 'layedit', 'laydate','table'], function(){
        var form = layui.form;

        table = layui.table.render({
            elem: '#hbTable',
            height: 'full-99',
            cellMinWidth: '80',
            page: 'true',
            limit:'20',
            url: "{:get_addon_url('StockControl://index/stock1index')}?_ajax=1",
            id:'hbTable',
            cols: [[
				{field:'id', width:200, title:'入库单号', align: 'center'},
				{field:'memo',title:'备注', align: 'center'},
				{field:'ctime', width:200,title:'入库时间', align: 'center'},

                {field:'operating',title:'操作',templet:function(data){
                    var html = '<a  class="layui-btn layui-btn-xs option-edit" data-id="' + data.id + '">查看详情</a>';
                    return html;
                }, align: 'center', width: 140}
            ]]
        });
        layui.form.on('submit(*)', function(data){
            layui.table.reload('hbTable', {
                where: data.field
                ,page: {
                    curr: 1 //重新从第 1 页开始
                }
            });
            return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
        });


        //添加
        $(document).on('click', '.add-class', function(){
            JsGet("{:get_addon_url('StockControl://index/stock1Add')}", function(tpl){
				if(tpl.status){
					layer.open({
						type: 1,
						area: setpage(600,500),
						data:'',
						title: '新增入库单',
						content: tpl.data,
						btn:['保存','关闭'],
						yes:function (index,layero) {
							var data1 = form.val("stock1");
							JsPost("{:get_addon_url('StockControl://index/stock1Add')}",data1,function (re) {
								if(re.status){
									layer.msg('保存成功');
									layer.close(index);
									//userTables.reload();
									layui.table.reload('hbTable');
								}else{
									layer.msg(re.msg);
								}
							});
						}
					});
				}else{
					layer.msg(tpl.msg);
				}
			});
            return false;
        });

    });



</script>